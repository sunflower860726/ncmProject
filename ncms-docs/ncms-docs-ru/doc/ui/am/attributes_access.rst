
.. _attributes_access:

Алгоритм поиска атрибута в контексте страницы (наследование атрибутов)
======================================================================

Для отображения динамического контента в ηCMS мы обращаемся
к :term:`атрибутам <атрибут>` доступным в контексте :term:`страницы <страница>`,
используя конструкции :any:`asm` и :any:`asmAny` в :term:`HTTL` разметке :term:`ядра <ядро>` страницы.
При доступе к атрибуту по имени, ηCMS использует следующий алгоритм
нахождения значения :term:`атрибутов <атрибут>`:

|

1. Если :term:`атрибут` явно принадлежит текущей странице (является частью :term:`сборки <сборка>`),
   то он будет использован. В противном случае переходим на шаг **2**.
2. Поднимаемся вверх по :term:`иерархии наследования текущей страницы <иерархия наследования страницы>`
   и ищем данный атрибут в родительских :term:`сборках <сборка>`.
   Если атрибут не найден, переходим на шаг **3**.
3. Поднимаемся вверх по :term:`дереву навигации <дерево навигации>` страницы
   и для каждой страницы осуществляем поиск атрибута в соответствии с шагами **1** и **2**.
   Если атрибут с указанным именем не был найден, переходим на шаг **4**.
4. ηCMS вычисляет :term:`главную страницу <главная страница>`
   в зависимости от текущей локализации пользователя и настроек системы
   и запрашивает требуемый атрибут у главной страницы, используя для данного HTTP запроса
   алгоритм из шагов  **1** и **2**. Если атрибут у главной страницы не был найден, HTTL директива
   :any:`asmAny` вернет `null`, директива :any:`asm` также вернет `null` и сообщит об ошибке
   в консоль сервера ηCMS.

Несмотря на множество шагов в данном процессе, ηCMS достаточно быстро решает задачу нахождения
атрибутов в контексте страниц, используя оптимизированный доступ к БД и алгоритмы кеширования.

