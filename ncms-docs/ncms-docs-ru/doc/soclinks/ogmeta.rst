.. _ogmeta:

Генерация мета-информации для интеграции с социальными сетями
=============================================================

Мета-информация, добавленная на страницу, соответствующая протоколу `Open Graph <http://ogp.me>`_, позволяет интегрировать контент страницы в социальный граф.
Или, говоря простым языком, страница с мета-информацией будет правильно отображается в ленте новостей социальной сети при нажатии кнопки "Share".

Для генерации мета-информации для интеграции страницы с социальными сетями внутрь блока `head` необходимо
добавить вызов метода `ogmeta`:

.. code-block:: html

    <head>
      $!{ogmeta()}
      ...
    </head>

Для общего случая или с указанием массива параметров:

.. code-block:: html

    <head>
      $!{ogmeta(["title":"Тестовая страница", "image":"some_image_ref", ...])}
      ...
    </head>

В результате код страницы будет содержать следующий блок:

.. code-block:: html

    <head>
      <meta property="og:site_name" content="site.ru"/>
      <meta property="og:image" content="http://site.ru/rs/media/fileid/323"/>
      <meta property="og:title" content="Тестовая страница"/>
      <meta property="og:locale" content="en"/>
      <meta property="og:type" content="article"/>
      <meta property="og:url" content="http://site.ru/news/123"/>
      ...
    </head>

Список автоматически генерируемых полей:

* `og:url` - URL-страницы. Нельзя переопределить.
* `og:site_name` - Название сайта, равно имени сервера в запросе. Нельзя переопределить.
* `og:locale` - Локаль страницы, равна локали запроса. Нельзя переопределить.
* `og:title` - Заголовок страницы, по-умолчанию равен `page.hname`. Можно переопределить.
* `og:type` - Тип страницы, по-умолчанию равен "article". Можно переопределить.
* `og:image` - Картинка, добавляется если указано имя :term:`атрибута сборки <атрибут>` с типом Image,
  или строка, указывающая на путь к файлу картинки в медиарепозитории.

Любые другие параметры, переданные в вызове `ogmeta`, будут добавлены "как есть", с добавлением префикса `og:`.
